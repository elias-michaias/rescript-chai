// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Belt_Array from "rescript/lib/es6/belt_Array.js";
import * as Connection from "./utils/Connection.bs.js";

var batch = Belt_Array.concatMany;

function listen(_url, cons) {
  return {
          start: (function (dispatch) {
              var conn = Connection.Manager.getOrCreateConnection(_url);
              var messageHandler = function ($$event) {
                dispatch(cons($$event.data));
              };
              conn.ws.onmessage = messageHandler;
              return function () {
                conn.ws.onmessage = (function (param) {
                    
                  });
              };
            })
        };
}

var $$WebSocket = {
  listen: listen
};

function every(interval, cons) {
  return {
          start: (function (dispatch) {
              var timerCallback = function () {
                dispatch(cons());
              };
              var id = setInterval(timerCallback, interval);
              return function () {
                clearInterval(id);
              };
            })
        };
}

var Time = {
  every: every
};

function on(eventName, cons) {
  return {
          start: (function (dispatch) {
              var handler = function ($$event) {
                dispatch(cons($$event));
              };
              var $$window = window;
              $$window.addEventListener(eventName, handler);
              return function () {
                $$window.removeEventListener(eventName, handler);
              };
            })
        };
}

var Events = {
  on: on
};

var Browser = {
  Events: Events
};

export {
  batch ,
  $$WebSocket ,
  Time ,
  Browser ,
}
/* No side effect */
